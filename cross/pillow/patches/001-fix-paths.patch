--- setup.py.orig	2018-10-01 07:51:22.000000000 +0200
+++ setup.py	2018-12-09 22:45:46.959145724 +0100
@@ -136,12 +136,13 @@
 
 NAME = 'Pillow'
 PILLOW_VERSION = get_version()
-JPEG_ROOT = None
+INSTALL_ROOT = os.environ['STAGING_INSTALL_PREFIX']
+JPEG_ROOT = (os.path.join(INSTALL_ROOT, "lib"), os.path.join(INSTALL_ROOT, "include"))
 JPEG2K_ROOT = None
-ZLIB_ROOT = None
+ZLIB_ROOT = JPEG_ROOT
 IMAGEQUANT_ROOT = None
 TIFF_ROOT = None
-FREETYPE_ROOT = None
+FREETYPE_ROOT = JPEG_ROOT
 LCMS_ROOT = None
 
 
@@ -339,7 +339,7 @@
                 _add_directory(library_dirs, "/usr/X11/lib")
                 _add_directory(include_dirs, "/usr/X11/include")
 
-        elif sys.platform.startswith("linux"):
+        elif False and sys.platform.startswith("linux"):
             arch_tp = (plat.processor(), plat.architecture()[0])
             # This should be correct on debian derivatives.
             if os.path.exists('/etc/debian_version'):
@@ -414,13 +414,8 @@
 
         # standard locations
         if not self.disable_platform_guessing:
-            _add_directory(library_dirs, "/usr/local/lib")
-            _add_directory(include_dirs, "/usr/local/include")
-
-            _add_directory(library_dirs, "/usr/lib")
-            _add_directory(include_dirs, "/usr/include")
-            # alpine, at least
-            _add_directory(library_dirs, "/lib")
+            _add_directory(library_dirs, os.environ['STAGING_INSTALL_PREFIX'] + "/lib")
+            _add_directory(include_dirs, os.environ['STAGING_INSTALL_PREFIX'] + "/include")
 
         # on Windows, look for the OpenJPEG libraries in the location that
         # the official installer puts them
